

    <!doctype html>
<html lang="en">
<meta charset="utf-8">
<title>Start a tech blog using Jekyll Part II</title>
<meta name="description" content="">
<meta name="keywords" content="blog, jekyll, github-pages">


<meta property="og:locale" content="en_US">
<meta property="og:title" content="Start a tech blog using Jekyll Part II">
<meta property="og:description" content="In the previous [post]({% post_url 2015-07-25-start-a-tech-blog-using-jekyll-part-i %}), we saw how to start a new bl...">
<meta property="og:url" content="/blog/start-a-tech-blog-using-jekyll-part-ii">
<meta property="og:site_name" content="Alex Salguero">


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Alex Salguero Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Type -->
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Crimson+Text:400,400italic,700,700italic" rel='stylesheet' type='text/css' />
<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/assets/css/entypo.css" media="all">
<link rel="stylesheet" href="/assets/css/highlight.css" media="all">

<!-- In order to use Calendas Plus, you must first purchase it. Then, create a font-face package using FontSquirrel.
<link rel='stylesheet' href='/assets/cal.css' media='all' />
-->



<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/i.css">

<!-- Fresh Squeezed jQuery -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">

<div id="bump">
  <body class="">
    <header class="site-header">
      <div class="wrap">
        <hgroup>
          <h1><a href="/">Alex Salguero</a></h1>
        </hgroup>
        <a href="#nav" class="menu"><span class='icons'>☰</span></a>
        <nav role="navigation">
          <ul>
            <li>
              <a href="/" title="Alex Salguero">Home</a>
            </li>
            
            
            <li><a href="/about" >About</a></li>
            
            <li><a href="/posts" >Posts</a></li>
            

          </ul>
        </nav>
      </div>
    </header>


<section class="article">


  <div class="overlay"></div>
  
  <div class="featured-image" style="background-image: url(/images/start-a-tech-blog-using-jekyll/blog-1024x768.jpg)"></div>
  


      <article class="wrap post">
        <header class="post-header">
          <hgroup>
            <h1>Start a tech blog using Jekyll Part II</h1>
            <p class="date">Jul 29, 2015</p>
            <p class="intro"></p>
          </hgroup>
        </header>

        <p>In the previous <a href="/blog/start-a-tech-blog-using-jekyll-part-i">post</a>, we saw how to start a new blog from scratch using Jekyll and Github Pages. In this second one I’ll explain some modifications that can be made to get some extra functionality out of Jekyll.</p>

<p>It’s worth mentioning that Jekyll uses <a href="https://github.com/Shopify/liquid/wiki">Liquid</a>, a template engine for ruby. It provides the necessary control structures and functions to allow you to perform simple operations in your templates. We’re going to be using those structures quite a bit here, so we can get as much juice as possible from the possibilities that static content generation provides.</p>

<h1 id="adding-google-analytics">Adding Google Analytics</h1>

<p>Lets start with something simple. Everyone knows that adding GA to any page consists on appending a bit of Javascript to the bottom of the page. So lets do that very quickly.</p>

<p>First things first. Create a GA’s account associated to your domain and get your tracking code from <a href="https://www.google.com/analytics/web/">Google Analytics</a>.</p>

<p>Stick that code into a variable in your “_config.yml” like so:</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">analytics</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">google</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">tracking_id</span><span class="p-Indicator">:</span> <span class="s">&quot;{YOUR_TRACKING_CODE_HERE}&quot;</span></code></pre></div>

<p>Next, create a file “analytics.html” in your “_includes” folder, and add the following content:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">site</span><span class="p">.</span><span class="nx">analytics</span><span class="p">.</span><span class="nx">google</span> <span class="o">%</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
        <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">o</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">r</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">m</span><span class="p">){</span><span class="nx">i</span><span class="p">[</span><span class="s1">&#39;GoogleAnalyticsObject&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">r</span><span class="p">;</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span><span class="o">||</span><span class="kd">function</span><span class="p">(){</span>
                    <span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">q</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">q</span><span class="o">||</span><span class="p">[]).</span><span class="nx">push</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)},</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">l</span><span class="o">=</span><span class="mi">1</span><span class="o">*</span><span class="k">new</span> <span class="nb">Date</span><span class="p">();</span><span class="nx">a</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">o</span><span class="p">),</span>
                <span class="nx">m</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">o</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span><span class="nx">a</span><span class="p">.</span><span class="nx">async</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">g</span><span class="p">;</span><span class="nx">m</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">m</span><span class="p">)</span>
        <span class="p">})(</span><span class="nb">window</span><span class="p">,</span><span class="nb">document</span><span class="p">,</span><span class="s1">&#39;script&#39;</span><span class="p">,</span><span class="s1">&#39;//www.google-analytics.com/analytics.js&#39;</span><span class="p">,</span><span class="s1">&#39;ga&#39;</span><span class="p">);</span>

        <span class="nx">ga</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;{{site.analytics.google.tracking_id}}&#39;</span><span class="p">,</span> <span class="s1">&#39;auto&#39;</span><span class="p">);</span>
        <span class="nx">ga</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">,</span> <span class="s1">&#39;pageview&#39;</span><span class="p">);</span>
    <span class="o">&lt;</span><span class="err">/script&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}</span></code></pre></div>

<p>This will add the necessary javascript code to the page only if the configuration value for google is defined in the “_config.yml” file.</p>

<p>Finally, include this piece of code in your “footer.html” to make sure your track all your blog pages:</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid">&lt;/footer&gt;
    <span class="p">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span>analytics.html<span class="w"> </span><span class="p">%}</span>
  &lt;/body&gt;
&lt;/html&gt;</code></pre></div>

<h1 id="a-comments-section">A comments section</h1>

<p>A very similar approach can be used to get a comments section in your blog. I’ve seen a great increase in adoption of <a href="https://disqus.com/">Disqus</a> as a comments tool in all sorts of tech blogs. I liked both the styling and the way it displays conversations. And it’s also very easy to set up, very much like Google Analytics.</p>

<p>So the steps are pretty similar. First go to the <a href="https://disqus.com/">Disqus</a> website and create an account if you don’t have one already. Find the section “Add Disqus to a site” and pick up a name. </p>

<p>Store that name into your “_config.yml”, like so:</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">owner</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">disqus</span><span class="p-Indicator">:</span> <span class="s">&quot;{YOUR_DISQUS_NAME}&quot;</span></code></pre></div>

<p>Once you have that in place, you’ll need to create a “comments.html” file in your “_includes” section, with following content:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">page</span><span class="p">.</span><span class="nx">comments</span> <span class="o">%</span><span class="p">}</span>

<span class="o">&lt;</span><span class="nx">aside</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;disqus&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;disqus_thread&quot;</span><span class="o">&gt;&lt;</span><span class="err">/div&gt;</span>
    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
        <span class="kd">var</span> <span class="nx">disqus_shortname</span> <span class="o">=</span> <span class="s1">&#39;{{ site.owner.disqus }}&#39;</span><span class="p">;</span>

        <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">dsq</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span> <span class="nx">dsq</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">&#39;text/javascript&#39;</span><span class="p">;</span> <span class="nx">dsq</span><span class="p">.</span><span class="nx">async</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">dsq</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">&#39;//&#39;</span> <span class="o">+</span> <span class="nx">disqus_shortname</span> <span class="o">+</span> <span class="s1">&#39;.disqus.com/embed.js&#39;</span><span class="p">;</span>
            <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">dsq</span><span class="p">);</span>
        <span class="p">})();</span>
    <span class="o">&lt;</span><span class="err">/script&gt;</span>
    <span class="o">&lt;</span><span class="nx">noscript</span><span class="o">&gt;</span><span class="nx">Please</span> <span class="nx">enable</span> <span class="nx">JavaScript</span> <span class="nx">to</span> <span class="nx">view</span> <span class="nx">the</span> <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;http://disqus.com/?ref_noscript&quot;</span><span class="o">&gt;</span><span class="nx">comments</span> <span class="nx">powered</span> <span class="nx">by</span> <span class="nx">Disqus</span><span class="p">.</span><span class="o">&lt;</span><span class="err">/a&gt;&lt;/noscript&gt;</span>
    <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;http://disqus.com&quot;</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;dsq-brlink&quot;</span><span class="o">&gt;</span><span class="nx">comments</span> <span class="nx">powered</span> <span class="nx">by</span> <span class="o">&lt;</span><span class="nx">span</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;logo-disqus&quot;</span><span class="o">&gt;</span><span class="nx">Disqus</span><span class="o">&lt;</span><span class="err">/span&gt;&lt;/a&gt;</span>
<span class="o">&lt;</span><span class="err">/aside&gt;</span>

<span class="p">{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}</span></code></pre></div>

<p>Similarly to Google Analytics, this piece of code will only be added if the comments for the page are set to true in the <a href="http://jekyllrb.com/docs/frontmatter/">Front Matter</a> of your page.</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">---
layout: post
comments: true
---</code></pre></div>

<p>Finally, just include this file wherever you want your comments section to be. In my case, I have it at the bottom of my “post.html” layout:</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{{</span><span class="w"> </span><span class="nv">content</span><span class="w"> </span><span class="p">}}</span>

      <span class="p">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span>share.html<span class="w"> </span><span class="p">%}</span>

      <span class="p">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span>comments.html<span class="w"> </span><span class="p">%}</span>

      &lt;/article&gt;

    &lt;/section&gt;
&lt;/div&gt;

<span class="p">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span>footer.html<span class="w"> </span><span class="p">%}</span></code></pre></div>

<h1 id="creating-an-all-posts-page">Creating an “All posts” page</h1>

<p>This piece of functionality is meant to simply list all the posts of the blog in a page that is accessible from a top navigation menu bar. That would be the “POSTS” section in this blog, for instance.</p>

<p>So the first thing to do, is to add a new link to the navigation menu. We can use some custom variables defined in the “_config.yml” file like so:</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">links</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">About</span>
    <span class="l-Scalar-Plain">url</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/about</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Posts</span>
    <span class="l-Scalar-Plain">url</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/posts</span></code></pre></div>

<p>These variables are then available in the layouts and includes, which are used to generate the navigation menu. You should add this little loop to the section where you create your navigation menu:</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>link<span class="w"> </span>in<span class="w"> </span>site.links<span class="w"> </span><span class="p">%}</span>
    &lt;li&gt;&lt;a href=&quot;<span class="p">{{</span><span class="w"> </span><span class="nv">link</span><span class="p">.</span><span class="nv">url</span><span class="w"> </span><span class="p">}}</span>&quot;&gt;<span class="p">{{</span><span class="w"> </span><span class="nv">link</span><span class="p">.</span><span class="nv">title</span><span class="w"> </span><span class="p">}}</span>&lt;/a&gt;&lt;/li&gt;
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span></code></pre></div>

<p>Next, we need to create the page that the URL points to. In this case “posts.md”. In here we just select which layout to use:</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid">---
layout: post-index
permalink: /posts/index.html
title: All posts
---</code></pre></div>

<p>And finally, we create the layout “post-index.html” in the “_layouts” folder with the content:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;&lt;</span><span class="nx">span</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nx">page</span><span class="p">.</span><span class="nx">title</span> <span class="p">}}</span><span class="o">&lt;</span><span class="err">/span&gt;&lt;/h2&gt;</span>

<span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="nx">post</span> <span class="k">in</span> <span class="nx">site</span><span class="p">.</span><span class="nx">posts</span> <span class="o">%</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="nx">article</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;{{ site.url }}{{ post.url }}&quot;</span> <span class="nx">title</span><span class="o">=</span><span class="s2">&quot;{{ post.title }}&quot;</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nx">post</span><span class="p">.</span><span class="nx">title</span> <span class="p">}}</span><span class="o">&lt;</span><span class="err">/a&gt;&lt;/h3&gt;</span>
        <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nx">post</span><span class="p">.</span><span class="nx">description</span> <span class="o">|</span> <span class="nx">strip_html</span> <span class="o">|</span> <span class="nx">truncate</span><span class="o">:</span> <span class="mi">160</span> <span class="p">}}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
    <span class="o">&lt;</span><span class="err">/article&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span></code></pre></div>

<p>This code just loops through the existing posts on the site, creating a link to each of them and displaying a truncated version of its description. Piece of cake!</p>

<h1 id="tags-with-jekyll">Tags with Jekyll</h1>

<p>Now, to the meaty parts. There’s a problem with static file generation and that is the lack of a persistence layer such as a database that can link information together. And that’s quite a key part for creating a system such as post tagging.</p>

<p>Funnily enough, Jekyll provides a tagging mechanism by default, which you the can use to produce your own implementation of a tagging system. That’s done through the “tags” section in the Front Matter of your posts. </p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid">---
layout: post
tags: [blog, jekyll, github-pages]
---</code></pre></div>

<p>Jekyll does actually nothing with those tags, but it allows you to access them through its plugin mechanism. The idea is to generate a new static page for each of the existing tags in all our posts. We then make a list of those posts and their links, ordered by publication date.</p>

<p>Bare with me, it’s simpler than it sounds. Everything is explained in the <a href="http://jekyllrb.com/docs/plugins/">Plugins</a> page. What we only need is to create our own <a href="http://jekyllrb.com/docs/plugins/#generators">generator</a>.</p>

<p>Firstly, we create a new layout for the tags section in the “_layout” directory called “tag-index.html”. In here, we build the structure of the page that will contain the list of posts that have a given tag on them. Something like:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">{% include header.html %}

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&#39;tag-list&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;section&gt;</span>
        <span class="nt">&lt;article&gt;</span>
            <span class="nt">&lt;ol&gt;</span>
            <span class="nt">&lt;h2&gt;&lt;span&gt;</span>{{page.title}}<span class="nt">&lt;/span&gt;&lt;/h2&gt;</span>
            <span class="nt">&lt;ul&gt;</span>
            {% for post in site.posts %}
                {% for tag in post.tags %}
                    {% assign tag = {{ tag | slugify }} %}
                    {% if tag == page.tag %}
                        <span class="nt">&lt;article&gt;</span>
                            <span class="nt">&lt;h3&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ site.url }}{{ post.url }}&quot;</span> <span class="na">title=</span><span class="s">&quot;{{ post.title }}&quot;</span><span class="nt">&gt;</span>{{ post.title }}<span class="nt">&lt;/a&gt;&lt;/h3&gt;</span>
                            <span class="nt">&lt;p&gt;</span>{{ post.description | strip_html | truncate: 160 }}<span class="nt">&lt;/p&gt;</span>
                        <span class="nt">&lt;/article&gt;</span>
                    {% endif %}
                {% endfor %}
            {% endfor %}
            <span class="nt">&lt;/ul&gt;</span>
            <span class="nt">&lt;/ol&gt;</span>
        <span class="nt">&lt;/article&gt;</span>
    <span class="nt">&lt;/section&gt;</span>
<span class="nt">&lt;/div&gt;</span>

{% include footer.html %}</code></pre></div>

<p>What we’re doing here, is to go through all the existing posts and all their tags, checking if they happen to have the tag for the current page (made available in the “page.tag” variable). If they do, we add them to the list of the page.</p>

<p>Secondly, we need to create a folder “_plugins” in the project’s root. In there, we’re going to place our generator. Create a file named “tag_generator.rb” and copy the following content in it:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">module</span> <span class="nn">Jekyll</span>
  <span class="k">class</span> <span class="nc">TagIndex</span> <span class="o">&lt;</span> <span class="no">Page</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
      <span class="vi">@site</span> <span class="o">=</span> <span class="n">site</span>
      <span class="vi">@base</span> <span class="o">=</span> <span class="n">base</span>
      <span class="vi">@dir</span> <span class="o">=</span> <span class="n">dir</span>
      <span class="vi">@name</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="vi">@name</span><span class="p">)</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="s1">&#39;_layouts&#39;</span><span class="p">),</span> <span class="s1">&#39;tag-index.html&#39;</span><span class="p">)</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;tag&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="n">tag</span>
      <span class="n">tag_title_prefix</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_title_prefix&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;Tagged as &amp;ldquo;&#39;</span>
      <span class="n">tag_title_suffix</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_title_suffix&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;&amp;rdquo;&#39;</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;title&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">tag_title_prefix</span><span class="si">}#{</span><span class="n">tag</span><span class="si">}#{</span><span class="n">tag_title_suffix</span><span class="si">}</span><span class="s2">&quot;</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">site</span><span class="o">.</span><span class="n">layouts</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">site_payload</span><span class="p">)</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">site</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
  <span class="k">class</span> <span class="nc">TagGenerator</span> <span class="o">&lt;</span> <span class="no">Generator</span>
    <span class="n">safe</span> <span class="kp">true</span>
    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="n">site</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">site</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">key?</span> <span class="s1">&#39;tag-index&#39;</span>
        <span class="n">dir</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_dir&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;tag&#39;</span>
        <span class="n">site</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">tag</span><span class="o">|</span>
          <span class="n">site</span><span class="o">.</span><span class="n">pages</span> <span class="o">&lt;&lt;</span> <span class="no">TagIndex</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dir</span><span class="p">,</span> <span class="n">tag</span><span class="o">.</span><span class="n">downcase</span><span class="o">.</span><span class="n">strip</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/[^\w-]/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)),</span> <span class="n">tag</span><span class="p">)</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></div>

<p>The generator class, which extends from Generator, receives a site as a parameter and should generate some content as a side effect. So we choose a folder name where we’re going to be generating this content (‘tag’ sounds good enough to me) and we loop through all the existing tags in the site (these are the ones defined in all our Front Matters). For each of them, we’re going to generate a static page with a list of posts that contain that tag.</p>

<p>To generate the content, we use another class “TagIndex”. This class is aware of the page that we’re going to be generating so we can pass information to it, like the title or the tag we’re building the page for (yes! the very same that is made available in the “tag-index.html”). We then render the page in combination with “tag-index.html” and store the content of the newly generated page in the indicated path ‘tag’. </p>

<p>Finally, we just need to add the list of tags at the end of our posts with links to the newly created tag pages:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">{% if page.tags.size &gt; 0 %}
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;tags&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span&gt;</span>Tags:<span class="nt">&lt;/span&gt;</span>
    {% for tag in page.tags %}
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{site.url}}/tag/{{ tag | slugify }}&quot;</span><span class="nt">&gt;</span>{{ tag }}<span class="nt">&lt;/a&gt;</span>
        {% unless forloop.last %}
        -
        {% endunless %}
    {% endfor %}
<span class="nt">&lt;/div&gt;</span>
{% endif %}</code></pre></div>

<p>This approach has a big drawback though, which is that you’ll need to tell Github pages to do not build your site using Jekyll in order to get this to work. Why? Security reasons again. Github pages uses the “–safe” when building your site ignoring custom plugins. </p>

<p>You can disable Jekyll in Github pages by simply creating an empty “.nojekyll” file in your repository root.</p>

<p>But then, how do I deploy as I was doing by simply pushing my master branch? Well, there’s also a “solution” to it, which I’ll explain next.</p>

<h1 id="deploying-github-pages-without-jekyll">Deploying Github pages without Jekyll</h1>

<p>So here is the dilemma. Do I use custom plugins to enhance the default tooling provided by “safe Jekyll” or I use those plugins but change my deployment procedure?</p>

<p>To overcome this problem, there are a few solutions.</p>

<h2 id="making-the-site-folder-your-master-branch">Making the “_site” folder your master branch</h2>

<p>This seems like a good idea at first. Simply get your “username.github.io” repository started in the “_site” folder, build your project locally and then commit and push all the new content.</p>

<p>This actually works, but there is a huge drawback. You loose the ability to track changes in your main project’s source code. Everytime that you code, you should <strong>always</strong> do it using a CVS. Period. The flexibility and safety that it provides is just too huge to be ignored.</p>

<h2 id="having-two-repositories">Having two repositories</h2>

<p>Another strategy to overcome this problem is to have two repositories. One containing your source code of the blog and the other one the compiled version of it. Something like:</p>

<p>github.com/username/username.github.io.source
github.com/username/username.github.io</p>

<p>Again, this works, but seems a bit of an overkill to have two different repositories for the same project. </p>

<p>But wait… we are working with git! We have branches, right?</p>

<h2 id="using-two-branches-within-the-same-repository">Using two branches within the same repository</h2>

<p>I think this solution is the best of both worlds. You can actually use the “_site” folder as your master branch, but also have the rest of your code in CVS too. I came across this solution in this <a href="http://drewsilcock.co.uk/custom-jekyll-plugins/">post</a> which I’m going to summarize here.</p>

<p>The idea is to make your blog’s source repository a branch called “source”. Then transform the folder “_site” into the master branch. And finally automate the publishing process using a bash script.</p>

<p>So the first thing is to create the “source” branch:</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="c"># Create a new source branch</span>
git checkout -b <span class="nb">source</span>

<span class="c"># Tell git to track source remote branch &amp; push</span>
git branch -u origin/source <span class="nb">source</span>
git push origin <span class="nb">source</span></code></pre></div>

<p>Then the master branch:</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="c"># Locally delete the original master branch</span>
git branch -D master

<span class="c"># Make a new git repository within _site</span>
<span class="nb">cd </span>_site
git init
touch .nojekyll

<span class="c"># Make the new repository point to the existing master branch in Github </span>
git remote add origin https://github.com/<span class="o">{</span>YOUR_USERNAME<span class="o">}</span>/<span class="o">{</span>YOUR_USERNAME<span class="o">}</span>.github.io
git branch -u origin/master master</code></pre></div>

<p>In order to do not incidentally erase the “.nojekyll” file from the “_site” folder when building the content with Jekyll locally, we need to mark the file as included in the “_config.yml” file:</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">include</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="s">&quot;.nojekyll&quot;</span><span class="p-Indicator">]</span></code></pre></div>

<p>Finally, we only need to automate the deployment process. You can use any scripting language that you want to do this, but bash should serve well. Create a “publish.sh” file in the blog’s root with the content: </p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="c">#!/bin/bash</span>

<span class="k">if</span> <span class="o">[[</span> -z <span class="s2">&quot;$1&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&quot;Enter a git commit message!&quot;</span>
  <span class="nb">exit</span>
<span class="k">fi</span>

jekyll build <span class="o">&amp;&amp;</span> <span class="se">\</span>
  <span class="nb">cd </span>_site <span class="o">&amp;&amp;</span> <span class="se">\</span>
  git add . <span class="o">&amp;&amp;</span> <span class="se">\</span>
  git commit -am <span class="s2">&quot;$1&quot;</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
  git push origin master <span class="o">&amp;&amp;</span> <span class="se">\</span>
  <span class="nb">cd</span> .. <span class="o">&amp;&amp;</span> <span class="se">\</span>
  <span class="nb">echo</span> <span class="s2">&quot;Blog deployed.&quot;</span></code></pre></div>

<p>Now every time you want to deploy your blog you only need to run this bash script indicating a commit message like so:</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">./publish.sh <span class="s2">&quot;New blog post!&quot;</span></code></pre></div>

<p>And there you go! You now have your blog up and running with a few bells and whistles. Happy blogging!</p>


      
<div class="tags">
    <span>Tags:</span>
    
        <a href="/tag/blog">blog</a>
        
        -
        
    
        <a href="/tag/jekyll">jekyll</a>
        
        -
        
    
        <a href="/tag/github-pages">github-pages</a>
        
    
</div>


      <a href="https://twitter.com/share" class="twitter-share-button share-item" data-via="hasumedic" data-size="large" data-count="none">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

      
<aside class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'hasublog';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</aside>


      </article>

    </section>
</div>

<div class="push"></div>
  <footer>
    <aside class="wrap">
      <ol class="prev-posts">
        <p class="list-title">Recent Posts</p>
         <!-- for1 -->
            <li>
              <span class="recent-title"><a href="/blog/scala-exchange-2015" title="Scala eXchange 2015">Scala eXchange 2015 </a></span>
              <span class="date">Dec 16, 2015</span>
            </li>
         <!-- for1 -->
            <li>
              <span class="recent-title"><a href="/blog/collections-sliding" title="Sliding through collections">Sliding through collections </a></span>
              <span class="date">Nov 22, 2015</span>
            </li>
         <!-- for1 -->
            <li>
              <span class="recent-title"><a href="/blog/the-software-craftsman" title="Book review: "The Software Craftsman"">Book review: "The Software Craftsman" </a></span>
              <span class="date">Aug 31, 2015</span>
            </li>
        
      </ol>

      <div class="social">
        <ul>
            <li>
                <a id="mail" href="mailto:hasumedic@gmail.com">
                    <span class="foot-link">
                        <span class="icon-mail"></span> Contact Me
                    </span>
                </a>
            </li>

            
            <li>
                <a id="twit" href="https://twitter.com/hasumedic" target="_blank"><span class="foot-link"><span class="icon-twitter"></span> @hasumedic</span></a>
            </li>
            


            
            <li>
                <a id="github" href="https://github.com/hasumedic" target="_blank"><span class="foot-link"><span class="icon-github"></span> Github</span></a>
            </li>
            
        </ul>
    </div>
    </aside>
    <small>&copy; 2015 Alex Salguero. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://jekyll.gtat.me/about">Balzac</a> theme.</small>
  </footer>


    <script>
        if (document.location.hostname.search("hasumedic.com") !== -1) {
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r;
                i[r] = i[r] || function () {
                            (i[r].q = i[r].q || []).push(arguments)
                        }, i[r].l = 1 * new Date();
                a = s.createElement(o),
                        m = s.getElementsByTagName(o)[0];
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-65046797-1', 'auto');
            ga('send', 'pageview');
        }
    </script>


  <!-- If they're out, get some from the cellar -->
  <script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
  <script src="/assets/js/retina.min.js"></script>

  <!-- Custom JS -->
  <script src="/assets/js/scripts.js"></script>


  </body>
</html>

